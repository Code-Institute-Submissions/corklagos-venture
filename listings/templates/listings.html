{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}

<main class="container-fluid">
    <!-- Page headers -->
    <div class="row mx-md-5 my-3 text-uppercase text-center">
        <div class="col-12">
            <h2>Our latest available car parts:</h2>
            <hr>
        </div>
    </div>
    
    <div class="row">
    <!-- Filter section -->
        <div class="col-12 col-lg-3 px-3 px-sm-5 px-md-0">
            <div class="row mx-md-5 mx-1 my-3">
                <div class="col-12 filter-section">
                    <form class="filter-list mb-3" action="" method="get">
                        <div class="row">
                            <div class="col-6 col-lg-12 text-left">
                                <h5 class="filter-header">Filter by Category</h5>
                                {{ filter.form.listing_category|as_crispy_field }}
                            </div>
                            <div class="col-6 col-lg-12 filter-brand text-left">
                                <h5 class="filter-header">Filter by brand</h5>
                                {{ filter.form.listing_brand|as_crispy_field }}
                            </div>
                        </div>
                        <div>
                            <button type="submit" class="btn btn-gal bg-wheel py-1 mb-3">Filter</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    
<!-- Listing section -->
        <div class="col-12 col-lg-9">
            <div class="row mx-md-5">
            {% for listing in filter.qs %}
                <div class="col-12">
                    <div class="listing-section mx-4 mx-md-2 mb-3">
                        <div class="row no-gutters">
                            <div class="col-sm-4">
                                <img src="{{ listing.listing_image.url }}" class="card-img" alt="{{ listing.listing_image.url }}">
                            </div>
                            <div class="col-sm-8">
                                <div class="card-body py-2">
                                    <h5 class="card-title px-3 text-wheel text-uppercase">{{ listing.listing_name}}</h5>
                                    <p class="card-text px-3 text-beige">{{ listing.listing_description}}</p>
                                    <div class="row text-beige text-center">
                                        <div class="col-4 listing-price">
                                            <p>{{ listing.listing_price}} <i class="fas fa-euro-sign"></i></p>
                                        </div>
                                        <div class="col-2 mt-1 listing-interest">
                                            <!--If user has liked this product before, the thumbs up would be filled-->
                                            <a href=""><i class="listing-icon far fa-thumbs-up"></i></a>
                                            <!--<i class="fas fa-thumbs-up"></i>-->
                                        </div>
                                        <div class="col-6 mt-1 listing-buy">
                                            <a href="#" type="button" class="btn bg-wheel py-1 mb-3">Add to Cart</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
            </div>
        </div>

    </div>
</main>

{% endblock %}