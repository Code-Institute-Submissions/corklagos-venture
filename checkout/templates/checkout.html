{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}

<main class="container-fluid">
    <!-- Page headers -->
    <div class="row mx-md-5 mx-1 my-3">
        <div class="col-12 text-uppercase text-center">
            <h1>Please confirm your billing details for the payment</h1>
            <hr>
        </div>
    </div>
    
    <form
        role="form"
        class="row py-3 mx-5"
        method="POST"
        action="">
            {% csrf_token %}
        <div class="form-group col-md-6 px-1">
            {{ order_form|crispy }}
        </div>
        <div class="form-group col-md-6 px-1">
            {{ payment_form|crispy }}
        </div>
    </form>  
    
    <div class="row text-right mr-5 my-5">
        <div class="col-12">
            <h1>Total: {{ total }}<i class="fas fa-euro-sign"></i></h1>
        </div>
        <div class="col-12">
            <div class="row justify-content-end">
                <div class="col-6">
                    <a href="{% url 'view_bag' %}" class="btn bg-wheel py-1 mb-3" role="button">Edit bag</a>
                </div>
                <div class="col-6">
                    <a href="" class="btn bg-wheel py-1 mb-3" role="button">Pay</a>
                </div>
            </div>
        </div>
        
        
    </div>
 </main>

{% endblock %}

{% block stripe_js %}
    <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
    <script type="text/javascript">
        //<![CDATA[
            Stripe.setPublishableKey = '{{ publishable }}';
        //]]>
    </script>
    <script type="text/javascript" src="{% static 'js/stripe.js' %}"></script>
{% endblock %}